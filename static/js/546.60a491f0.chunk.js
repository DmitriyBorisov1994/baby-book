"use strict";(self.webpackChunkbaby_book=self.webpackChunkbaby_book||[]).push([[546],{8273:function(e,t,n){var r=n(1413),i=n(521),a=n(8105),s=n(5642),o=n(9389),d=n(1666),l=n(3707),c=n(7943),m=n(3344),u=n(2622),x=n(9286),f=(n(2791),n(438)),h=n.n(f),Z=n(3329),p=i.Z.Title;t.Z=function(e){var t=e.onFinish,n=e.note,i=e.todos,f=e.activities,j=e.cardActions,v=e.cardTitle,I=e.submitBtnText;return(0,Z.jsx)(a.Z,{hoverable:!0,bordered:!1,style:{width:"100%"},actions:j,title:v,children:(0,Z.jsxs)(s.Z,{onFinish:t,initialValues:n?(0,r.Z)((0,r.Z)({},n),{},{date:h()(n.noteDateString,"DD/MM/YYYY"),todos:null===i||void 0===i?void 0:i.map((function(e){return e})),activities:null===f||void 0===f?void 0:f.map((function(e){return(0,r.Z)((0,r.Z)({},e),{},{endSleep:h()(e.endSleep,"HH:mm"),eatTime:h()(e.eatTime,"HH:mm"),startSleep:h()(e.startSleep,"HH:mm")})}))}):void 0,children:[(0,Z.jsx)(s.Z.Item,{name:"title",rules:[{required:!0,message:"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435!"}],children:(0,Z.jsx)(o.Z,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a"})}),(0,Z.jsx)(s.Z.Item,{name:"date",rules:[{required:!0,message:"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435!"}],children:(0,Z.jsx)(d.Z,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0430\u0442\u0443 \u043f\u043e\u0441\u0442\u0430",onChange:function(){},format:"DD/MM/YYYY",style:{width:"100%"}})}),(0,Z.jsx)(s.Z.Item,{name:"text",rules:[{required:!0,message:"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435!"}],children:(0,Z.jsx)(o.Z.TextArea,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442"})}),(0,Z.jsx)(p,{level:4,className:"card-title",children:"\u0421\u043f\u0438\u0441\u043e\u043a \u0434\u0435\u043b:"}),(0,Z.jsx)(s.Z.List,{name:"todos",children:function(e,t,n){var i=t.add,a=t.remove,d=n.errors;return(0,Z.jsxs)(Z.Fragment,{children:[e.map((function(t,n){return(0,Z.jsxs)(s.Z.Item,{label:n+1,required:!1,children:[(0,Z.jsx)(s.Z.Item,(0,r.Z)((0,r.Z)({},t),{},{name:[t.name,"text"],validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u0434\u0430\u0447\u0443 \u0438\u043b\u0438 \u0443\u0434\u0430\u043b\u0438\u0442\u0435 \u043f\u043e\u043b\u0435"}],noStyle:!0,children:(0,Z.jsx)(o.Z,{placeholder:"\u0427\u0442\u043e \u043d\u0443\u0436\u043d\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c",style:{width:"80%"}})})),e.length>=1?(0,Z.jsx)(u.Z,{style:{marginLeft:"1rem",fontSize:"1.2rem"},onClick:function(){return a(t.name)}}):null]},t.key)})),(0,Z.jsxs)(s.Z.Item,{children:[(0,Z.jsx)(l.Z,{type:"dashed",onClick:function(){return i()},style:{width:"60%"},icon:(0,Z.jsx)(x.Z,{}),children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"}),(0,Z.jsx)(l.Z,{type:"dashed",onClick:function(){i("",0)},style:{width:"80%",marginTop:"20px"},icon:(0,Z.jsx)(x.Z,{}),children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043d\u0430\u0447\u0430\u043b\u043e \u0441\u043f\u0438\u0441\u043a\u0430"}),(0,Z.jsx)(s.Z.ErrorList,{errors:d})]})]})}}),(0,Z.jsx)(p,{level:4,className:"card-title",children:"\u0410\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c:"}),(0,Z.jsx)(s.Z.List,{name:"activities",children:function(e,t){var n=t.add,i=t.remove;return(0,Z.jsxs)(Z.Fragment,{children:[e.map((function(e){return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(s.Z.Item,(0,r.Z)((0,r.Z)({},e),{},{label:"\u041f\u0440\u043e\u0441\u043d\u0443\u043b\u0441\u044f",name:[e.name,"endSleep"],children:(0,Z.jsx)(c.Z,{format:"HH:mm",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0440\u0435\u043c\u044f",showNow:!1,style:{width:"100%"}})})),(0,Z.jsx)(s.Z.Item,(0,r.Z)((0,r.Z)({},e),{},{label:"\u041f\u043e\u0435\u043b",name:[e.name,"eatTime"],children:(0,Z.jsx)(c.Z,{format:"HH:mm",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0440\u0435\u043c\u044f",showNow:!1,style:{width:"100%"}})})),(0,Z.jsx)(s.Z.Item,(0,r.Z)((0,r.Z)({},e),{},{label:"\u0421\u043a\u043e\u043b\u044c\u043a\u043e \u043f\u043e\u0435\u043b",name:[e.name,"eatAmount"],children:(0,Z.jsx)(m.Z,{min:0,step:10,style:{width:"100%"}})})),(0,Z.jsx)(s.Z.Item,(0,r.Z)((0,r.Z)({},e),{},{label:"\u0423\u0441\u043d\u0443\u043b",name:[e.name,"startSleep"],children:(0,Z.jsx)(c.Z,{format:"HH:mm",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0440\u0435\u043c\u044f",showNow:!1,style:{width:"100%"}})})),(0,Z.jsx)(u.Z,{style:{fontSize:"1.2rem",margin:"0 0 1rem 0"},onClick:function(){return i(e.name)}})]})})),(0,Z.jsx)(s.Z.Item,{children:(0,Z.jsx)(l.Z,{type:"dashed",onClick:function(){return n()},block:!0,icon:(0,Z.jsx)(x.Z,{}),children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c"})})]})}}),(0,Z.jsx)(s.Z.Item,{children:(0,Z.jsx)(l.Z,{type:"primary",htmlType:"submit",children:I})})]})})}},1546:function(e,t,n){n.r(t);var r=n(1413),i=n(4165),a=n(5861),s=n(9439),o=n(2791),d=n(6871),l=n(4740),c=n(6188),m=n(521),u=n(6106),x=n(914),f=n(2622),h=n(1752),Z=n(7833),p=n(6875),j=n(5273),v=n(8273),I=n(3329),y=m.Z.Paragraph,b=m.Z.Text;t.default=function(){var e=(0,d.UO)().noteId,t=(0,l.CG)((function(t){if(e)return(0,c.Qg)(t,e)})),n=(0,l.CG)((function(e){if(t)return(0,p.qu)(e,t.noteId)})),m=(0,l.CG)((function(e){if(t)return(0,Z.ZK)(e,t.noteId)})),k=(0,d.s0)(),w=(0,c.Pq)(),H=(0,s.Z)(w,1)[0],g=(0,c.wu)(),T=(0,s.Z)(g,1)[0],S=(0,p.jT)(),C=(0,s.Z)(S,1)[0],Y=(0,p.wR)(),A=(0,s.Z)(Y,1)[0],N=(0,p.q)(),P=(0,s.Z)(N,1)[0],q=(0,Z.mE)(),D=(0,s.Z)(q,1)[0],M=(0,Z.cC)(),F=(0,s.Z)(M,1)[0],G=(0,Z.XX)(),L=(0,s.Z)(G,1)[0],_=(0,l.CG)((function(e){return e.auth.userId})),B=(0,o.useCallback)(function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,r){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H({userId:t,noteId:r});case 2:if(!n){e.next=5;break}return e.next=5,Promise.all(n.map((function(e){return P({userId:t,todoId:e.todoId})})));case 5:if(!m){e.next=8;break}return e.next=8,Promise.all(m.map((function(e){return L({userId:t,activityId:e.id})})));case 8:k(-1);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[_,e]),W=(0,o.useMemo)((function(){return[(0,I.jsxs)("div",{className:"card-actionsWrapper",onClick:function(){_&&e&&B(_,e)},children:[(0,I.jsx)(f.Z,{},"delete"),(0,I.jsx)("span",{children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]}),(0,I.jsxs)("div",{className:"card-actionsWrapper",onClick:function(){k(-1)},children:[(0,I.jsx)(h.Z,{},"edit"),(0,I.jsx)("span",{children:"\u041d\u0430\u0437\u0430\u0434"})]})]}),[_,e]),z=(0,o.useCallback)(function(){var t=(0,a.Z)((0,i.Z)().mark((function t(a){var s;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!_){t.next=17;break}return s={title:a.title,text:a.text,noteDateString:a.date.format("DD/MM/YYYY"),noteId:e},t.next=4,T({userId:_,updatedNote:s});case 4:if(!a.todos){t.next=10;break}return t.next=7,Promise.all(a.todos.map((function(t){if(t.todoId)A({userId:_,todo:t});else{var n={todoId:"Todo_".concat((0,j.x0)()),noteId:e,text:t.text};C({userId:_,newTodo:n})}})));case 7:if(!n){t.next=10;break}return t.next=10,Promise.all(n.map((function(e){a.todos.find((function(t){return t.todoId=e.todoId}))||P({userId:_,id:e.todoId})})));case 10:if(!a.activities){t.next=16;break}return t.next=13,Promise.all(a.activities.map((function(t){if(t.id){var n=(0,r.Z)((0,r.Z)({},t),{},{eatTime:t.eatTime.format("HH:mm"),endSleep:t.endSleep.format("HH:mm"),startSleep:t.startSleep.format("HH:mm")});F({userId:_,updatedActivity:n})}else{var i={id:"Activity_".concat((0,j.x0)()),noteId:e,eatTime:t.eatTime.format("HH:mm"),endSleep:t.endSleep.format("HH:mm"),startSleep:t.startSleep.format("HH:mm"),eatAmount:t.eatAmount};D({userId:_,newActivity:i})}})));case 13:if(!m){t.next=16;break}return t.next=16,Promise.all(m.map((function(e){a.activities.find((function(t){return t.id=e.id}))||L({userId:_,id:e.id})})));case 16:k(-1);case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[]),E=t?(0,I.jsx)(v.Z,{onFinish:z,note:t,todos:n,activities:m,cardActions:W,cardTitle:"\u041e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c:",submitBtnText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f"}):(0,I.jsx)(y,{style:{textAlign:"center"},children:(0,I.jsx)(b,{type:"secondary",strong:!0,children:"\u0417\u0430\u043f\u0438\u0441\u044c \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430!"})});return(0,I.jsx)(u.Z,{justify:"center",align:"middle",className:"mh100 formWrapperPadding",children:(0,I.jsx)(x.Z,{xs:24,md:12,children:E})})}}}]);
//# sourceMappingURL=546.60a491f0.chunk.js.map